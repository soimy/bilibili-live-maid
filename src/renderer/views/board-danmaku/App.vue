<style lang="stylus" scoped>
.container
  background-color rgba(0, 0, 0, 0.2)
  color aliceblue
  height 100%
  box-sizing border-box
  overflow hidden
  display flex
  flex-direction column

header
  padding 24px 6px 6px
  display flex
  justify-content space-between
  align-items center
  border-bottom 1px solid red
  flex none

nav
  flex none
  box-sizing border-box
  padding 12px 6px
  transition all 0.3s
  display flex
  flex-direction column
  // text-shadow -1px 1px 2px #000, 1px 1px 2px #000, 1px -1px 0 #000, -1px -1px 0 #000

  & > i
    margin-bottom 10px

  &.hide
    visibility hidden
    width 0
    padding 12px 0
    font-size 0

main
  flex 1
  height calc(100% - 59px)
  display flex

.content
  flex 1
  // 因为 header 高度51px
  height 100%
  padding-left 6px
  overflow-y auto
  // animation msg_in 0.5s 1 ease-out
  text-shadow -1px 1px 2px #000, 1px 1px 2px #000, 1px -1px 0 #000, -1px -1px 0 #000

.fan-medal
  border-radius 5px
  font-size 10px
  background-color #883300
  margin-right 0.4em
  padding 0 0.4em 0 0.4em

.nickname
  color #00ccff

.msg_line
  animation slide_in 0.5s 1 ease-out

@keyframes slide_in {
  0% {
    margin-left 100%
    width 300%
  }
  100% {
    margin-left 0
    width 100%
  }
}

</style>

<template>
  <div class="container">
    <header>
      <div>
        <i
          @click="isShowNav = !isShowNav"
          class="icon-btn"
          :class="isShowNav ? 'icon-expand' : 'icon-collapse'"
        />
      </div>
      <div>人气: <span class="rainbow">{{ online }}</span></div>
    </header>
    <main>
      <nav :class="{'hide': !isShowNav}">
        <i class="icon-btn icon-game"></i>
        <i
          @click="isPin = !isPin"
          class="icon-btn" :class="isPin ? 'icon-pin' : 'icon-pin-outline'"
        />
        <i
          @click="isBotNotice = !isBotNotice"
          class="icon-btn" :class="isBotNotice ? 'icon-alarm' : 'icon-alarm-cancel'"
        />
      </nav>
      <div class="content">
        <div v-for="item in msgList" :key="item.timeStamp" class="msg_line">
          <p v-if="item.type === MESSAGE_TYPE_DANMU">
            <span
              v-if="item.fansMedalName"
              class="fan-medal">
              Lv{{ item.fansMedalLevel }} {{ item.fansMedalName }}
            </span>
            <b class="nickname">{{ item.nickname }}</b>
            <span>：{{ item.content }}</span>
          </p>
          <p v-else-if="item.type === MESSAGE_TYPE_JOIN">
            <span
              v-if="item.fansMedalName"
              class="fan-medal">
              Lv{{ item.fansMedalLevel }} {{ item.fansMedalName }}
            </span>
            <b>{{ item.nickname }}</b>
            <span style="font-size: 0.8em;">进入了直播间，欢迎</span>
          </p>
        </div>
      </div>
    </main>
  </div>
</template>

<script lang="ts">
import { MESSAGE_TYPE_DANMU, MESSAGE_TYPE_JOIN, UPDATE_TTS_TOKEN } from '@/shared/constants';
import { defineComponent } from 'vue';
import btts from '@/renderer/services/btts';

export default defineComponent({
  name: 'danmaku',
  data() {
    return {
      msgList: [] as Array<any>,
      online: 0 as number,
      isShowNav: true as boolean,
      isPin: false as boolean,
      isBotNotice: false as boolean,
      token: '' as string,
    };
  },
  methods: {
    listenMainProcessMessage() {
      const maxMsgCound = 200;
      const quack = new Audio('data:audio/mpeg;base64,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');
      quack.volume = 0.2;
      window.ipcRenderer.on(MESSAGE_TYPE_JOIN, (evt: any, messageData: any) => {
        this.msgList.push(messageData);
        quack.play();
        if (this.msgList.length > maxMsgCound) this.msgList.shift();

        this.scrollBoxToBottom('main > .content');
        if (this.isBotNotice) {
          this.speak(`欢迎 ${messageData.nickname} 进入直播间`);
        }
      });

      window.ipcRenderer.on(MESSAGE_TYPE_DANMU, (evt: any, messageData: any) => {
        this.msgList.push(messageData);
        quack.play();
        if (this.msgList.length > maxMsgCound) this.msgList.shift();

        this.scrollBoxToBottom('main > .content');
        if (this.isBotNotice) {
          this.speak(`${messageData.nickname} 说 ${messageData.content}`);
        }
      });

      window.ipcRenderer.on('online_changed', (evt: any, online: number) => {
        // 直播间人气发生变化
        this.online = online;
      });

      window.ipcRenderer.on(UPDATE_TTS_TOKEN, (evt: any, token: string) => {
        localStorage.setItem('token', token);
        this.token = token;
      });
    },

    scrollBoxToBottom(selector: string) {
      setTimeout(() => {
        document.querySelector(selector)
          ?.scrollTo({
            top: 999999,
            left: 0,
          });
      }, 100);
    },

    sendMessageToWindow() {
      window.ipcRenderer.send('change_window_pin', this.isPin);
    },

    speak(text: string) {
      if (!text) {
        return;
      }
      btts({
        tex: text,
        tok: this.token,
        cuid: 'hello_world',
        spd: 5,
        pit: 5,
        vol: 15,
        per: 4,
      }, {
        volume: 0.5,
        autoDestroy: true,
        timeout: 10000,
        hidden: true,
        autoplay: true,
      });
    },
  },
  watch: {
    isPin() {
      this.sendMessageToWindow();
    },
  },

  mounted() {
    this.listenMainProcessMessage();
    this.sendMessageToWindow();
    this.token = localStorage.getItem('token') || '';
  },
  setup() {
    return {
      MESSAGE_TYPE_DANMU,
      MESSAGE_TYPE_JOIN,
    };
  },
});
</script>
